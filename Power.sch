EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 14 15
Title "Kleinvoet"
Date "2020-06-11"
Rev "Rev. A"
Comp "Department of Electronic Engineering - Stellenbosch University"
Comment1 "Author: CM Geldenhuys <20198329@sun.ac.za>"
Comment2 "Project: Kleinvoet"
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L power:VBUS #PWR?
U 1 1 5EEDED6C
P 3700 3150
F 0 "#PWR?" H 3700 3000 50  0001 C CNN
F 1 "VBUS" H 3715 3323 50  0000 C CNN
F 2 "" H 3700 3150 50  0001 C CNN
F 3 "" H 3700 3150 50  0001 C CNN
	1    3700 3150
	1    0    0    -1  
$EndComp
$Comp
L Device:D_Schottky_Small D?
U 1 1 5EEDF9F3
P 4050 3950
F 0 "D?" H 4050 3743 50  0000 C CNN
F 1 "MBR054" H 4050 3834 50  0000 C CNN
F 2 "" V 4050 3950 50  0001 C CNN
F 3 "~" V 4050 3950 50  0001 C CNN
F 4 "MBR054" H 4050 3950 50  0001 C CNN "MPN"
	1    4050 3950
	-1   0    0    1   
$EndComp
$Comp
L Device:R_Small R?
U 1 1 5EEE0506
P 3700 4150
F 0 "R?" H 3759 4196 50  0000 L CNN
F 1 "100k" H 3759 4105 50  0000 L CNN
F 2 "" H 3700 4150 50  0001 C CNN
F 3 "~" H 3700 4150 50  0001 C CNN
	1    3700 4150
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5EEE0CBB
P 3700 4500
F 0 "#PWR?" H 3700 4250 50  0001 C CNN
F 1 "GND" H 3705 4327 50  0000 C CNN
F 2 "" H 3700 4500 50  0001 C CNN
F 3 "" H 3700 4500 50  0001 C CNN
	1    3700 4500
	1    0    0    -1  
$EndComp
Wire Wire Line
	4100 3450 3700 3450
Wire Wire Line
	3700 3450 3700 3150
Wire Wire Line
	3700 3450 3700 3950
Connection ~ 3700 3450
Wire Wire Line
	3700 4250 3700 4500
Wire Wire Line
	3950 3950 3700 3950
Connection ~ 3700 3950
Wire Wire Line
	3700 3950 3700 4050
Wire Wire Line
	4150 3950 4400 3950
Wire Wire Line
	4400 3950 4400 3650
$Comp
L power:+BATT #PWR?
U 1 1 5EEE7459
P 4400 3150
F 0 "#PWR?" H 4400 3000 50  0001 C CNN
F 1 "+BATT" H 4415 3323 50  0000 C CNN
F 2 "" H 4400 3150 50  0001 C CNN
F 3 "" H 4400 3150 50  0001 C CNN
	1    4400 3150
	1    0    0    -1  
$EndComp
Wire Wire Line
	4400 3150 4400 3250
$Comp
L Device:Q_PMOS_GSD Q?
U 1 1 5EEE7DDB
P 4300 3450
F 0 "Q?" H 4504 3496 50  0000 L CNN
F 1 "DMG3405" H 4504 3405 50  0000 L CNN
F 2 "" H 4500 3550 50  0001 C CNN
F 3 "~" H 4300 3450 50  0001 C CNN
F 4 "DMG3405" H 4300 3450 50  0001 C CNN "MPN"
	1    4300 3450
	1    0    0    -1  
$EndComp
$Comp
L grootvoet:TPS737xx U?
U 1 1 5EEEA2A4
P 5800 1550
F 0 "U?" H 5800 1915 50  0000 C CNN
F 1 "TPS737xx" H 5800 1824 50  0000 C CNN
F 2 "" H 6050 1800 50  0001 C CNN
F 3 "" H 6050 1800 50  0001 C CNN
F 4 "TPS73733DCQR" H 5800 1550 50  0001 C CNN "MPN"
F 5 "Texas Instruments" H 5800 1550 50  0001 C CNN "Mfr."
	1    5800 1550
	1    0    0    -1  
$EndComp
Wire Wire Line
	5400 1450 5000 1450
Connection ~ 4400 3950
$Comp
L Device:R_Small R?
U 1 1 5EEEC589
P 5200 1650
F 0 "R?" V 5100 1650 50  0000 C CNN
F 1 "10k" V 5300 1700 50  0000 C CNN
F 2 "" H 5200 1650 50  0001 C CNN
F 3 "~" H 5200 1650 50  0001 C CNN
	1    5200 1650
	0    1    1    0   
$EndComp
Wire Wire Line
	5400 1650 5300 1650
$Comp
L Device:C_Small C?
U 1 1 5EEEE332
P 4400 4250
F 0 "C?" H 4492 4296 50  0000 L CNN
F 1 "10u" H 4492 4205 50  0000 L CNN
F 2 "" H 4400 4250 50  0001 C CNN
F 3 "~" H 4400 4250 50  0001 C CNN
	1    4400 4250
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5EEEE7F3
P 4400 4500
F 0 "#PWR?" H 4400 4250 50  0001 C CNN
F 1 "GND" H 4405 4327 50  0000 C CNN
F 2 "" H 4400 4500 50  0001 C CNN
F 3 "" H 4400 4500 50  0001 C CNN
	1    4400 4500
	1    0    0    -1  
$EndComp
Wire Wire Line
	4400 4500 4400 4350
Wire Wire Line
	4400 4150 4400 3950
$Comp
L power:GND #PWR?
U 1 1 5EEEF349
P 5800 2000
F 0 "#PWR?" H 5800 1750 50  0001 C CNN
F 1 "GND" H 5805 1827 50  0000 C CNN
F 2 "" H 5800 2000 50  0001 C CNN
F 3 "" H 5800 2000 50  0001 C CNN
	1    5800 2000
	1    0    0    -1  
$EndComp
Wire Wire Line
	5750 2000 5800 2000
Connection ~ 5800 2000
Wire Wire Line
	5800 2000 5850 2000
$Comp
L Device:C_Small C?
U 1 1 5EEF11C8
P 4800 1700
F 0 "C?" H 4900 1750 50  0000 L CNN
F 1 "1u" H 4900 1650 50  0000 L CNN
F 2 "" H 4800 1700 50  0001 C CNN
F 3 "~" H 4800 1700 50  0001 C CNN
F 4 "Low ESR" H 4900 1550 50  0000 L CNN "Notes"
	1    4800 1700
	1    0    0    -1  
$EndComp
Wire Wire Line
	4700 3950 4400 3950
$Comp
L power:GND #PWR?
U 1 1 5EEF18DA
P 4800 1950
F 0 "#PWR?" H 4800 1700 50  0001 C CNN
F 1 "GND" H 4805 1777 50  0000 C CNN
F 2 "" H 4800 1950 50  0001 C CNN
F 3 "" H 4800 1950 50  0001 C CNN
	1    4800 1950
	1    0    0    -1  
$EndComp
Wire Wire Line
	4800 1950 4800 1800
$Comp
L Device:C_Small C?
U 1 1 5EEF269F
P 6350 1750
F 0 "C?" H 6442 1841 50  0000 L CNN
F 1 "10n" H 6442 1750 50  0000 L CNN
F 2 "" H 6350 1750 50  0001 C CNN
F 3 "~" H 6350 1750 50  0001 C CNN
F 4 "C0G" H 6442 1659 50  0000 L CNN "Notes"
	1    6350 1750
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5EEF2E86
P 6350 2000
F 0 "#PWR?" H 6350 1750 50  0001 C CNN
F 1 "GND" H 6355 1827 50  0000 C CNN
F 2 "" H 6350 2000 50  0001 C CNN
F 3 "" H 6350 2000 50  0001 C CNN
	1    6350 2000
	1    0    0    -1  
$EndComp
Wire Wire Line
	6350 1650 6200 1650
$Comp
L Device:C_Small C?
U 1 1 5EEF3784
P 6700 1750
F 0 "C?" H 6792 1841 50  0000 L CNN
F 1 "1u" H 6792 1750 50  0000 L CNN
F 2 "" H 6700 1750 50  0001 C CNN
F 3 "~" H 6700 1750 50  0001 C CNN
F 4 "Low ESR" H 6792 1659 50  0000 L CNN "Notes"
	1    6700 1750
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C?
U 1 1 5EEF3E13
P 7200 1750
F 0 "C?" H 7292 1796 50  0000 L CNN
F 1 "10u" H 7292 1705 50  0000 L CNN
F 2 "" H 7200 1750 50  0001 C CNN
F 3 "~" H 7200 1750 50  0001 C CNN
	1    7200 1750
	1    0    0    -1  
$EndComp
Wire Wire Line
	6200 1450 6700 1450
Wire Wire Line
	6700 1450 6700 1650
Wire Wire Line
	6700 1450 7200 1450
Wire Wire Line
	7200 1450 7200 1650
Connection ~ 6700 1450
$Comp
L power:GND #PWR?
U 1 1 5EEF8C9F
P 6700 2000
F 0 "#PWR?" H 6700 1750 50  0001 C CNN
F 1 "GND" H 6705 1827 50  0000 C CNN
F 2 "" H 6700 2000 50  0001 C CNN
F 3 "" H 6700 2000 50  0001 C CNN
	1    6700 2000
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5EEF90AA
P 7200 2000
F 0 "#PWR?" H 7200 1750 50  0001 C CNN
F 1 "GND" H 7205 1827 50  0000 C CNN
F 2 "" H 7200 2000 50  0001 C CNN
F 3 "" H 7200 2000 50  0001 C CNN
	1    7200 2000
	1    0    0    -1  
$EndComp
Wire Wire Line
	7200 2000 7200 1850
Wire Wire Line
	6700 2000 6700 1850
Wire Wire Line
	6350 1850 6350 2000
Text Notes 3650 2850 0    50   ~ 0
Swtich between Vbatt (LIPO) and Vbus (USB)
$Comp
L power:+3V3 #PWR?
U 1 1 5EF01957
P 6700 1300
F 0 "#PWR?" H 6700 1150 50  0001 C CNN
F 1 "+3V3" H 6715 1473 50  0000 C CNN
F 2 "" H 6700 1300 50  0001 C CNN
F 3 "" H 6700 1300 50  0001 C CNN
	1    6700 1300
	1    0    0    -1  
$EndComp
Wire Wire Line
	6700 1300 6700 1450
Text Notes 4750 2500 0    50   ~ 0
Used by MCU, GPS, ADC and is exposed on headers
$Comp
L power:VCC #PWR?
U 1 1 5EF0722E
P 4700 3800
F 0 "#PWR?" H 4700 3650 50  0001 C CNN
F 1 "VCC" H 4715 3973 50  0000 C CNN
F 2 "" H 4700 3800 50  0001 C CNN
F 3 "" H 4700 3800 50  0001 C CNN
	1    4700 3800
	1    0    0    -1  
$EndComp
Wire Wire Line
	4700 3800 4700 3950
Text Notes 3600 950  0    50   ~ 10
Main 3v3 Supply
Wire Notes Line
	4900 2900 4900 4750
Wire Notes Line
	4900 4750 3600 4750
Wire Notes Line
	3600 2900 3600 4750
Wire Notes Line
	3600 2900 4900 2900
Wire Wire Line
	5100 1650 5000 1650
Wire Wire Line
	5000 1650 5000 1450
Wire Wire Line
	4800 1600 4800 1450
Wire Wire Line
	4800 1450 5000 1450
Connection ~ 5000 1450
$Comp
L power:VCC #PWR?
U 1 1 5EF4C51A
P 3650 1300
F 0 "#PWR?" H 3650 1150 50  0001 C CNN
F 1 "VCC" H 3665 1473 50  0000 C CNN
F 2 "" H 3650 1300 50  0001 C CNN
F 3 "" H 3650 1300 50  0001 C CNN
	1    3650 1300
	1    0    0    -1  
$EndComp
Wire Wire Line
	3650 1300 3650 1450
Text Notes 5550 4150 0    50   ~ 0
Power Rails\n----------------------------\nVBUS - USB bus power (5V) [Max 500mA]\n+BATT - LIPO power (3.6-4.2V) [Max 1A]\nVCC - VBUS (pref.) or +BATT [Max 500mA]\nVDD - GPS backup battery\n+3v3 - Main 3.3V supply [Max 500mA]\n+3.3VADC - 3.3V rail for ADC with filtering [Max 25mA]\n+3.3VA - 3.3V rail for analogue part of MCU [Max 25mA]
$Comp
L Connector:TestPoint TP?
U 1 1 5EEECC26
P 5000 1450
F 0 "TP?" H 5058 1522 50  0000 L CNN
F 1 "TestPoint" H 5058 1477 50  0001 L CNN
F 2 "" H 5200 1450 50  0001 C CNN
F 3 "~" H 5200 1450 50  0001 C CNN
	1    5000 1450
	1    0    0    -1  
$EndComp
$Comp
L Battery_Management:MCP73831-2-OT U?
U 1 1 5EEF3F74
P 4950 5700
F 0 "U?" H 4650 5950 50  0000 C CNN
F 1 "MCP73831-2-OT" H 5350 5400 50  0000 C CNN
F 2 "Package_TO_SOT_SMD:SOT-23-5" H 5000 5450 50  0001 L CIN
F 3 "http://ww1.microchip.com/downloads/en/DeviceDoc/20001984g.pdf" H 4800 5650 50  0001 C CNN
F 4 "Microchip" H 4950 5700 50  0001 C CNN "Mfr."
F 5 "MCP73831-2-OT" H 4950 5700 50  0001 C CNN "MPN"
	1    4950 5700
	1    0    0    -1  
$EndComp
$Comp
L power:VBUS #PWR?
U 1 1 5EEF7DD5
P 4950 5400
F 0 "#PWR?" H 4950 5250 50  0001 C CNN
F 1 "VBUS" H 4965 5573 50  0000 C CNN
F 2 "" H 4950 5400 50  0001 C CNN
F 3 "" H 4950 5400 50  0001 C CNN
	1    4950 5400
	1    0    0    -1  
$EndComp
$Comp
L power:VBUS #PWR?
U 1 1 5EEFA16D
P 6300 5400
F 0 "#PWR?" H 6300 5250 50  0001 C CNN
F 1 "VBUS" H 6315 5573 50  0000 C CNN
F 2 "" H 6300 5400 50  0001 C CNN
F 3 "" H 6300 5400 50  0001 C CNN
	1    6300 5400
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5EEFA9F7
P 4550 6000
F 0 "#PWR?" H 4550 5750 50  0001 C CNN
F 1 "GND" H 4555 5827 50  0000 C CNN
F 2 "" H 4550 6000 50  0001 C CNN
F 3 "" H 4550 6000 50  0001 C CNN
	1    4550 6000
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5EEFB815
P 6300 5900
F 0 "#PWR?" H 6300 5650 50  0001 C CNN
F 1 "GND" H 6305 5727 50  0000 C CNN
F 2 "" H 6300 5900 50  0001 C CNN
F 3 "" H 6300 5900 50  0001 C CNN
	1    6300 5900
	1    0    0    -1  
$EndComp
Wire Wire Line
	6300 5900 6300 5750
Wire Wire Line
	6300 5550 6300 5400
$Comp
L Device:C_Small C?
U 1 1 5EF00B7E
P 6300 5650
F 0 "C?" H 6392 5696 50  0000 L CNN
F 1 "4.7u" H 6392 5605 50  0000 L CNN
F 2 "" H 6300 5650 50  0001 C CNN
F 3 "~" H 6300 5650 50  0001 C CNN
F 4 "Low ESR" H 6300 5650 50  0001 C CNN "Notes"
F 5 "MuRata" H 6300 5650 50  0001 C CNN "Mfr."
F 6 "GRM188R60J475KE19D" H 6300 5650 50  0001 C CNN "MPN"
	1    6300 5650
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5EF0659B
P 6800 5900
F 0 "#PWR?" H 6800 5650 50  0001 C CNN
F 1 "GND" H 6805 5727 50  0000 C CNN
F 2 "" H 6800 5900 50  0001 C CNN
F 3 "" H 6800 5900 50  0001 C CNN
	1    6800 5900
	1    0    0    -1  
$EndComp
Wire Wire Line
	6800 5900 6800 5750
Wire Wire Line
	6800 5550 6800 5400
$Comp
L Device:C_Small C?
U 1 1 5EF065A6
P 6800 5650
F 0 "C?" H 6892 5696 50  0000 L CNN
F 1 "4.7u" H 6892 5605 50  0000 L CNN
F 2 "" H 6800 5650 50  0001 C CNN
F 3 "~" H 6800 5650 50  0001 C CNN
F 4 "Low ESR" H 6800 5650 50  0001 C CNN "Notes"
F 5 "MuRata" H 6800 5650 50  0001 C CNN "Mfr."
F 6 "GRM188R60J475KE19D" H 6800 5650 50  0001 C CNN "MPN"
	1    6800 5650
	1    0    0    -1  
$EndComp
$Comp
L power:+BATT #PWR?
U 1 1 5EF082DD
P 6800 5400
F 0 "#PWR?" H 6800 5250 50  0001 C CNN
F 1 "+BATT" H 6815 5573 50  0000 C CNN
F 2 "" H 6800 5400 50  0001 C CNN
F 3 "" H 6800 5400 50  0001 C CNN
	1    6800 5400
	1    0    0    -1  
$EndComp
$Comp
L power:+BATT #PWR?
U 1 1 5EF0C060
P 5450 5600
F 0 "#PWR?" H 5450 5450 50  0001 C CNN
F 1 "+BATT" H 5465 5773 50  0000 C CNN
F 2 "" H 5450 5600 50  0001 C CNN
F 3 "" H 5450 5600 50  0001 C CNN
	1    5450 5600
	1    0    0    -1  
$EndComp
Wire Wire Line
	5450 5600 5350 5600
$Comp
L Device:LED_Small D?
U 1 1 5EF0E889
P 5700 5550
F 0 "D?" V 5746 5480 50  0000 R CNN
F 1 "BLUE" V 5655 5480 50  0000 R CNN
F 2 "" V 5700 5550 50  0001 C CNN
F 3 "~" V 5700 5550 50  0001 C CNN
	1    5700 5550
	0    -1   -1   0   
$EndComp
$Comp
L Device:R_Small R?
U 1 1 5EF0F677
P 5500 5800
F 0 "R?" V 5400 5800 50  0000 C CNN
F 1 "1k" V 5600 5800 50  0000 C CNN
F 2 "" H 5500 5800 50  0001 C CNN
F 3 "~" H 5500 5800 50  0001 C CNN
	1    5500 5800
	0    1    1    0   
$EndComp
Wire Wire Line
	5400 5800 5350 5800
$Comp
L power:VBUS #PWR?
U 1 1 5EF13DD3
P 5700 5400
F 0 "#PWR?" H 5700 5250 50  0001 C CNN
F 1 "VBUS" H 5715 5573 50  0000 C CNN
F 2 "" H 5700 5400 50  0001 C CNN
F 3 "" H 5700 5400 50  0001 C CNN
	1    5700 5400
	1    0    0    -1  
$EndComp
Wire Wire Line
	5700 5400 5700 5450
$Comp
L Device:R_Small R?
U 1 1 5EF16CE7
P 4550 5900
F 0 "R?" H 4450 5900 50  0000 C CNN
F 1 "5.1k" H 4450 5800 50  0000 C CNN
F 2 "" H 4550 5900 50  0001 C CNN
F 3 "~" H 4550 5900 50  0001 C CNN
	1    4550 5900
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5EF19F9D
P 4950 6000
F 0 "#PWR?" H 4950 5750 50  0001 C CNN
F 1 "GND" H 4955 5827 50  0000 C CNN
F 2 "" H 4950 6000 50  0001 C CNN
F 3 "" H 4950 6000 50  0001 C CNN
	1    4950 6000
	1    0    0    -1  
$EndComp
Text Notes 3700 5900 0    50   ~ 0
Charge Rate\n--------\n10k = 100mA\n5.0k = 200mA\n2.0k = 500mA\n1.0k = 1000mA
Wire Notes Line
	7150 5100 3600 5100
Wire Notes Line
	3600 5100 3600 6300
Wire Notes Line
	3600 6300 7150 6300
Wire Notes Line
	7150 5100 7150 6300
Text Notes 3600 5100 0    50   ~ 10
LIPO Charge Circuit
$Comp
L Device:Fuse_Small F?
U 1 1 5EFE4488
P 3950 1450
F 0 "F?" H 3950 1635 50  0000 C CNN
F 1 "400mA" H 3950 1544 50  0000 C CNN
F 2 "" H 3950 1450 50  0001 C CNN
F 3 "~" H 3950 1450 50  0001 C CNN
	1    3950 1450
	1    0    0    -1  
$EndComp
$Comp
L Device:Ferrite_Bead_Small FB?
U 1 1 5F006F8E
P 4550 1450
F 0 "FB?" V 4313 1450 50  0000 C CNN
F 1 "100 @ 100 MHz" V 4404 1450 50  0000 C CNN
F 2 "" V 4480 1450 50  0001 C CNN
F 3 "~" H 4550 1450 50  0001 C CNN
	1    4550 1450
	0    1    1    0   
$EndComp
Wire Wire Line
	3650 1450 3850 1450
Wire Wire Line
	4050 1450 4450 1450
Wire Wire Line
	4650 1450 4800 1450
Connection ~ 4800 1450
Wire Notes Line
	3550 950  3550 2650
$Comp
L Device:LED_Small D?
U 1 1 5EF5B84A
P 7600 1900
F 0 "D?" V 7646 1830 50  0000 R CNN
F 1 "RED" V 7555 1830 50  0000 R CNN
F 2 "" V 7600 1900 50  0001 C CNN
F 3 "~" V 7600 1900 50  0001 C CNN
	1    7600 1900
	0    -1   -1   0   
$EndComp
$Comp
L Device:R_Small R?
U 1 1 5EF5D36E
P 7600 1700
F 0 "R?" H 7659 1746 50  0000 L CNN
F 1 "2.2k" H 7659 1655 50  0000 L CNN
F 2 "" H 7600 1700 50  0001 C CNN
F 3 "~" H 7600 1700 50  0001 C CNN
	1    7600 1700
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5EF5F3A2
P 7600 2000
F 0 "#PWR?" H 7600 1750 50  0001 C CNN
F 1 "GND" H 7605 1827 50  0000 C CNN
F 2 "" H 7600 2000 50  0001 C CNN
F 3 "" H 7600 2000 50  0001 C CNN
	1    7600 2000
	1    0    0    -1  
$EndComp
Wire Wire Line
	7600 1600 7600 1450
Wire Wire Line
	7600 1450 7200 1450
Connection ~ 7200 1450
Wire Wire Line
	5700 5650 5700 5800
Wire Wire Line
	5700 5800 5600 5800
Wire Notes Line
	7900 950  7900 2650
Wire Notes Line
	3550 2650 7900 2650
Wire Notes Line
	3550 950  7900 950 
$EndSCHEMATC
